server {
    listen 80;
    server_name localhost 127.0.0.1;
    root /var/www/html;
    index index.php index.html;

    location /surl/ {
        # 단축 URL 규칙: $1과 세미콜론이 정확히 보존됩니다.
        rewrite ^/surl/([a-zA-Z0-9]{6})$ /surl/redirect.php?code=$1 last;
        try_files $uri $uri/ /index.php;
    }

    location ~ \.php$ {
        include fastcgi_params;
        fastcgi_pass speedmis_v7_php83:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }
}
